"use strict";define(["jquery"],function(){return $("#top").load("header.html"),{init:function(){if(this.aTab=$("#box"),localStorage.getItem("shop")){var i=JSON.parse(localStorage.getItem("shop")),r="";$.ajax({type:"get",url:"../js/js/hua.json",success:function(a){$.each(i,function(n){$.each(a,function(t){if(n==a[t].id){var e=(a[t].num2.substr(1,3)*i[n]).toFixed(2);r+='<tr>\n\t\t\t\t\t\t\t\t<td style="width: 300px;" align="center">\n\t\t\t\t\t\t\t\t\t<a href="#"><img style="width: 80px;height: 80px;" src="../images/tu'+a[t].id+'.jpg" /></a><br />\n\t\t\t\t\t\t\t\t\t<a href="#" style="color: #E50065;">'+a[t].title+'</a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>是否节日:非节日 </td>\n\t\t\t\t\t\t\t\t<td align="center"><span style="text-decoration: line-through;">'+a[t].num1+'</span></td>\n\t\t\t\t\t\t\t\t<td align="center" class="dan">'+a[t].num2+'</td>\n\t\t\t\t\t\t\t\t<td align="center">\n\t\t\t\t\t\t\t\t\t<input type="text" size="4" class="inpug" data-id="'+a[t].id+'" value="'+i[n]+'"/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td align="center">￥'+e+'元</td>\n\t\t\t\t\t\t\t\t<td align="center">\n\t\t\t\t\t\t\t\t\t<a href="#" onclick="return false"  style="color: #E50065;" id="shan" data-id="'+a[t].id+'">删除</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>'}})}),$("#box").append(r)}})}$(".btnn").eq(0).click(function(){alert("您忍心清空吗?"),localStorage.removeItem("shop"),location.reload()}),this.aTab.on("click","#shan",function(){$(this).parents("tr").remove();var e=$(this).attr("data-id");$.each(i,function(t){t==e&&delete i[t]}),i=JSON.stringify(i),localStorage.setItem("shop",i),location.reload()}),this.aTab.on("focusout",".inpug",function(){var e=$(this).val();if(0<e){var t=$(this).parent().prev().html();t=t.substr(1,3),$(this).parent().next().html("￥"+(t*this.value).toFixed(2)+"元");var n=$(this).attr("data-id");$.each(i,function(t){t==n&&(i[t]=Number(e))}),i=JSON.stringify(i),localStorage.setItem("shop",i)}else alert("你是要删除此商品吗?"),$(this).parents("tr").remove()})}}});